<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FLUJO CALOR - Tu Sistema Completo de Automatizaci√≥n | Math AI</title>
    <meta name="description" content="Acceso completo al sistema FLUJO CALOR: plantilla N8N, prompts de IA, diagramas y checklist de implementaci√≥n.">
    
    <!-- Google Analytics 4 -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-LWV7YB90M5"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-LWV7YB90M5');
    </script>
    
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="lead-magnet.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;600;700&family=Work+Sans:wght@400;500&family=Fira+Code:wght@400;500&display=swap" rel="stylesheet">
    <link rel="icon" href="https://res.cloudinary.com/dfuya0vrl/image/upload/v1746402411/logo_sxdfzb.png" type="image/png">
</head>
<body class="flujo-calor-page contenido-page">
    
    <!-- Header de bienvenida -->
    <header class="welcome-header">
        <div class="container">
            <h1 class="welcome-title">üéâ ¬°Acceso Activado al FLUJO CALOR!</h1>
            <p class="welcome-subtitle">Tu sistema completo de automatizaci√≥n de leads est√° listo para implementar</p>
            <div class="user-welcome" id="userWelcome">
                <span>¬°Hola! Aqu√≠ est√° todo lo que necesitas üëá</span>
            </div>
        </div>
    </header>

    <main class="contenido-principal">
        <div class="container">
            
            <!-- Navegaci√≥n r√°pida -->
            <section class="section-navegacion">
                <h2 class="nav-title">üöÄ Acceso Directo al Contenido</h2>
                <div class="nav-grid">
                    <a href="#estrategia" class="nav-item">
                        <div class="nav-icon">üéØ</div>
                        <div class="nav-info">
                            <h3>1. Estrategia del Flujo</h3>
                            <p>Las 5 etapas del FLUJO CALOR explicadas paso a paso</p>
                        </div>
                    </a>
                    
                    <a href="#prompts" class="nav-item">
                        <div class="nav-icon">ü§ñ</div>
                        <div class="nav-info">
                            <h3>2. Prompts de IA</h3>
                            <p>3 prompts optimizados listos para copiar y usar</p>
                        </div>
                    </a>
                    
                    <a href="#plantilla" class="nav-item">
                        <div class="nav-icon">‚öôÔ∏è</div>
                        <div class="nav-info">
                            <h3>3. Plantilla N8N</h3>
                            <p>Archivo .json completo para importar directamente</p>
                        </div>
                    </a>
                    
                    <a href="#implementacion" class="nav-item">
                        <div class="nav-icon">‚úÖ</div>
                        <div class="nav-info">
                            <h3>4. Gu√≠a de Implementaci√≥n</h3>
                            <p>Checklist interactivo paso a paso</p>
                        </div>
                    </a>
                </div>
            </section>

            <!-- Secci√≥n 1: Estrategia -->
            <section id="estrategia" class="content-section">
                <h2 class="section-title">
                    <div class="section-icon">üéØ</div>
                    La Estrategia del FLUJO CALOR
                </h2>
                
                <p class="section-description">
                    Antes de implementar el flujo t√©cnico, necesitas entender la <strong>l√≥gica estrat√©gica</strong>. 
                    Un buen sistema de automatizaci√≥n no son solo nodos conectados; es una estrategia de negocio operativa.
                </p>
                
                <div class="etapas-container">
                    <h3 class="etapas-header">üî• Las 5 Etapas del FLUJO CALOR</h3>
                    
                    <div class="etapas-timeline">
                        <div class="timeline-line"></div>
                        
                        <div class="timeline-item">
                            <div class="timeline-marker">1</div>
                            <div class="timeline-content">
                                <div class="etapa-timing"><30s</div>
                                <h4 class="etapa-title">
                                    <span class="etapa-emoji">üé£</span>
                                    Etapa 1: Captura y Disparo Inmediato
                                </h4>
                                <div class="etapa-details">
                                    <div class="etapa-detail-item">
                                        <span class="detail-label">Trigger:</span>
                                        <span class="detail-content">Webhook/Cal.com/Formulario web</span>
                                    </div>
                                    <div class="etapa-detail-item">
                                        <span class="detail-label">Velocidad:</span>
                                        <span class="detail-content">< 30 segundos desde captura</span>
                                    </div>
                                    <div class="etapa-detail-item">
                                        <span class="detail-label">Objetivo:</span>
                                        <span class="detail-content">Activaci√≥n instant√°nea del flujo</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="timeline-item">
                            <div class="timeline-marker">2</div>
                            <div class="timeline-content">
                                <div class="etapa-timing">~2min</div>
                                <h4 class="etapa-title">
                                    <span class="etapa-emoji">üß†</span>
                                    Etapa 2: Enriquecimiento Inteligente
                                </h4>
                                <div class="etapa-details">
                                    <div class="etapa-detail-item">
                                        <span class="detail-label">Proceso:</span>
                                        <span class="detail-content">An√°lisis de IA de la informaci√≥n capturada</span>
                                    </div>
                                    <div class="etapa-detail-item">
                                        <span class="detail-label">Output:</span>
                                        <span class="detail-content">Puntuaci√≥n, categorizaci√≥n y contexto del lead</span>
                                    </div>
                                    <div class="etapa-detail-item">
                                        <span class="detail-label">Herramienta:</span>
                                        <span class="detail-content">OpenAI + prompts espec√≠ficos</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="timeline-item">
                            <div class="timeline-marker">3</div>
                            <div class="timeline-content">
                                <div class="etapa-timing">~30s</div>
                                <h4 class="etapa-title">
                                    <span class="etapa-emoji">üö¶</span>
                                    Etapa 3: Decisi√≥n Automatizada
                                </h4>
                                <div class="etapa-details">
                                    <div class="etapa-detail-item">
                                        <span class="detail-label">Logic:</span>
                                        <span class="detail-content">Segmentaci√≥n basada en puntuaci√≥n de IA</span>
                                    </div>
                                    <div class="etapa-detail-item">
                                        <span class="detail-label">Caminos:</span>
                                        <span class="detail-content">Lead Caliente | Lead Tibio | Lead Fr√≠o</span>
                                    </div>
                                    <div class="etapa-detail-item">
                                        <span class="detail-label">Criterio:</span>
                                        <span class="detail-content">ICP matching + urgencia detectada</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="timeline-item">
                            <div class="timeline-marker">4</div>
                            <div class="timeline-content">
                                <div class="etapa-timing">~1min</div>
                                <h4 class="etapa-title">
                                    <span class="etapa-emoji">‚ö°</span>
                                    Etapa 4: Acci√≥n Personalizada
                                </h4>
                                <div class="etapa-details">
                                    <div class="etapa-detail-item">
                                        <span class="detail-label">CRM Update:</span>
                                        <span class="detail-content">Datos estructurados + scoring</span>
                                    </div>
                                    <div class="etapa-detail-item">
                                        <span class="detail-label">Team Alert:</span>
                                        <span class="detail-content">Notificaci√≥n con contexto inteligente</span>
                                    </div>
                                    <div class="etapa-detail-item">
                                        <span class="detail-label">Lead Response:</span>
                                        <span class="detail-content">Email personalizado autom√°tico</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="timeline-item">
                            <div class="timeline-marker">5</div>
                            <div class="timeline-content">
                                <div class="etapa-timing">24-48h</div>
                                <h4 class="etapa-title">
                                    <span class="etapa-emoji">üóìÔ∏è</span>
                                    Etapa 5: Seguimiento Proactivo
                                </h4>
                                <div class="etapa-details">
                                    <div class="etapa-detail-item">
                                        <span class="detail-label">Recordatorios:</span>
                                        <span class="detail-content">Para citas agendadas</span>
                                    </div>
                                    <div class="etapa-detail-item">
                                        <span class="detail-label">Nurturing:</span>
                                        <span class="detail-content">Para leads no listos a√∫n</span>
                                    </div>
                                    <div class="etapa-detail-item">
                                        <span class="detail-label">Analytics:</span>
                                        <span class="detail-content">Tracking completo del funnel</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Secci√≥n 2: Prompts de IA -->
            <section id="prompts" class="content-section">
                <h2 class="section-title">
                    <div class="section-icon">ü§ñ</div>
                    Los 3 Prompts de IA Optimizados
                </h2>
                
                <p class="section-description">
                    Estos prompts son el <strong>componente m√°s valioso</strong>. Son el "software" que se ejecuta 
                    dentro del nodo de OpenAI en tu flujo N8N. C√≥pialos directamente y personal√≠zalos.
                </p>
                
                <!-- Prompt 1: Cualificaci√≥n General -->
                <div class="prompt-container">
                    <div class="prompt-header">
                        <h3 class="prompt-title">üîç Prompt 1: Cualificaci√≥n General y Puntuaci√≥n</h3>
                        <p class="prompt-description">
                            Analiza y punt√∫a leads autom√°ticamente seg√∫n tu ICP y criterios de negocio
                        </p>
                    </div>
                    <div class="code-block">
                        <button class="copy-btn" onclick="copyToClipboard('prompt1')">üìã Copiar</button>
<div id="prompt1">## ROL
Eres un Asistente de Ventas B2B experto en cualificar leads para una agencia de automatizaci√≥n llamada Math AI Agency.

## TAREA
Analiza la siguiente informaci√≥n de un nuevo lead. Tu objetivo es:
1. Asignar una puntuaci√≥n de "Calidad del Lead" de 1 a 10 (1=Baja, 10=Perfecta)
2. Identificar la necesidad principal del prospecto
3. Extraer el nombre de la empresa
4. Generar un resumen de 20 palabras para notificar al equipo de ventas
5. Responder √∫nicamente con un objeto JSON

## CONTEXTO
- **Mi empresa:** Math AI Agency, especializada en automatizaci√≥n para PYMES de servicios B2B
- **Cliente Ideal (ICP):** Empresas de servicios con equipos de ventas que sufren por procesos manuales y lentos
- **Informaci√≥n del Lead:**
    - Nombre: {{$json.body.payload.attendee.name}}
    - Email: {{$json.body.payload.attendee.email}}
    - Empresa: {{$json.body.payload.responses.company.value}}
    - Cargo: {{$json.body.payload.responses.role.value}}
    - Necesidad descrita: {{$json.body.payload.responses.need.value}}

## OUTPUT (Solo responde con este formato JSON)
{
  "puntuacion_lead": <n√∫mero_del_1_al_10>,
  "necesidad_principal": "<resumen_de_la_necesidad>",
  "nombre_empresa": "<nombre_de_la_empresa>",
  "resumen_slack": "<resumen_de_20_palabras_para_el_equipo>"
}</div>
                    </div>
                </div>
                
                <!-- Prompt 2: Detecci√≥n de Urgencia -->
                <div class="prompt-container">
                    <div class="prompt-header">
                        <h3 class="prompt-title">‚è±Ô∏è Prompt 2: Detecci√≥n de Urgencia</h3>
                        <p class="prompt-description">
                            Detecta autom√°ticamente el nivel de urgencia e intenci√≥n de compra del lead
                        </p>
                    </div>
                    <div class="code-block">
                        <button class="copy-btn" onclick="copyToClipboard('prompt2')">üìã Copiar</button>
<div id="prompt2">## ROL
Eres un analista de ventas especializado en detectar la intenci√≥n de compra y la urgencia en las comunicaciones de un prospecto.

## TAREA
Analiza la descripci√≥n de la necesidad del lead y clasifica su nivel de urgencia. Busca palabras clave como "ahora", "urgente", "inmediato", "estamos evaluando proveedores", vs. "a futuro", "explorando", "solo curiosidad". Responde √∫nicamente con un objeto JSON.

## CONTEXTO
- **Informaci√≥n del Lead:**
    - Necesidad descrita: {{$json.body.payload.responses.need.value}}

## OUTPUT (Solo responde con este formato JSON)
{
  "nivel_urgencia": "<Alta|Media|Baja>",
  "se√±al_detectada": "<frase_o_palabra_clave_que_justifica_el_nivel>"
}</div>
                    </div>
                </div>
                
                <!-- Prompt 3: An√°lisis de ICP -->
                <div class="prompt-container">
                    <div class="prompt-header">
                        <h3 class="prompt-title">üéØ Prompt 3: An√°lisis de Encaje con el ICP</h3>
                        <p class="prompt-description">
                            Eval√∫a autom√°ticamente si el lead encaja con tu perfil de cliente ideal
                        </p>
                    </div>
                    <div class="code-block">
                        <button class="copy-btn" onclick="copyToClipboard('prompt3')">üìã Copiar</button>
<div id="prompt3">## ROL
Eres un Director de Estrategia que debe decidir si un nuevo lead encaja con el perfil de cliente ideal de la agencia.

## TAREA
Eval√∫a los datos del lead contra nuestro ICP y determina el nivel de "encaje". Nuestro ICP son PYMES (5-50 empleados) de servicios B2B (consultor√≠a, agencias, software). Responde √∫nicamente con un objeto JSON.

## CONTEXTO
- **Datos del Lead:**
    - Empresa: {{$json.body.payload.responses.company.value}}
    - Cargo: {{$json.body.payload.responses.role.value}}
    - Industria/Necesidad: {{$json.body.payload.responses.need.value}}

## OUTPUT (Solo responde con este formato JSON)
{
  "encaje_icp": "<Ideal|Bueno|Bajo>",
  "justificacion": "<breve_explicaci√≥n_de_por_qu√©_encaja_o_no>"
}</div>
                    </div>
                </div>
                
                <div class="download-area">
                    <h4 class="download-title">üìã Personalizaci√≥n de los Prompts</h4>
                    <p class="download-description">
                        Recuerda adaptar las variables {{}} seg√∫n tu configuraci√≥n espec√≠fica de N8N. 
                        Cambia "Math AI Agency" por tu empresa e ICP por tu cliente ideal.
                    </p>
                </div>
            </section>

            <!-- Secci√≥n 3: Plantilla N8N -->
            <section id="plantilla" class="content-section">
                <h2 class="section-title">
                    <div class="section-icon">‚öôÔ∏è</div>
                    Plantilla N8N Lista para Importar
                </h2>
                
                <p class="section-description">
                    El flujo completo de N8N estructurado y listo para que lo importes y personalices seg√∫n tus herramientas espec√≠ficas.
                </p>
                
                <div class="download-area">
                    <h3 class="download-title">üì• Descarga la Plantilla</h3>
                    <p class="download-description">Archivo .json optimizado listo para importar en tu instancia de N8N</p>
                    <a href="#" class="download-btn" onclick="downloadN8NTemplate()">
                        <span>üìÅ</span>
                        <span>Descargar flujo-calor-n8n.json</span>
                        <span>‚Üí</span>
                    </a>
                </div>
                
                <div class="highlight-box">
                    <h4><span style="color: var(--flujo-primary);">‚ö†Ô∏è</span> Importante antes de importar:</h4>
                    <p>Esta plantilla es una <strong>base conceptual poderosa</strong>, no una soluci√≥n "plug-and-play". Para que funcione necesitar√°s:</p>
                    <ul class="instruction-list">
                        <li><strong>Configurar tus propias credenciales API</strong> (OpenAI, CRM, Slack, etc.)</li>
                        <li><strong>Adaptar los prompts</strong> a tu negocio espec√≠fico e ICP</li>
                        <li><strong>Conectar tus herramientas</strong> (CRM, Slack, email service, etc.)</li>
                        <li><strong>Personalizar las variables</strong> del flujo seg√∫n tu configuraci√≥n</li>
                    </ul>
                </div>
                
                <h3><span style="color: var(--flujo-primary);">üìã</span> Instrucciones de Importaci√≥n:</h3>
                <ol class="instruction-list">
                    <li><strong>Descarga el archivo JSON</strong> usando el bot√≥n de arriba</li>
                    <li><strong>Abre tu N8N:</strong> Ve a Workflows ‚Üí Import ‚Üí From File</li>
                    <li><strong>Selecciona el archivo</strong> flujo-calor-n8n.json descargado</li>
                    <li><strong>Configura credenciales:</strong> OpenAI, Slack, CRM, email service</li>
                    <li><strong>Personaliza los prompts</strong> con tu informaci√≥n espec√≠fica</li>
                    <li><strong>Prueba con un lead de ejemplo</strong> antes de activar en producci√≥n</li>
                </ol>
            </section>

            <!-- Secci√≥n 4: Implementaci√≥n -->
            <section id="implementacion" class="content-section">
                <h2 class="section-title">
                    <div class="section-icon">‚úÖ</div>
                    Checklist de Implementaci√≥n
                </h2>
                
                <p class="section-description">
                    Sigue este checklist interactivo paso a paso para implementar tu FLUJO CALOR correctamente y sin errores.
                </p>
                
                <h3><span style="color: var(--flujo-primary);">üìã</span> Pre-Implementaci√≥n</h3>
                <div class="checklist">
                    <div class="checklist-item">
                        <div class="checklist-checkbox">‚òê</div>
                        <div class="checklist-text">
                            <strong>N8N instalado y funcionando</strong>
                            <small>Aseg√∫rate de tener acceso a una instancia de N8N operativa con permisos de administrador</small>
                        </div>
                    </div>
                    
                    <div class="checklist-item">
                        <div class="checklist-checkbox">‚òê</div>
                        <div class="checklist-text">
                            <strong>API Keys obtenidas</strong>
                            <small>OpenAI, CRM (HubSpot/Pipedrive), Slack, servicio de email con l√≠mites apropiados</small>
                        </div>
                    </div>
                    
                    <div class="checklist-item">
                        <div class="checklist-checkbox">‚òê</div>
                        <div class="checklist-text">
                            <strong>Formulario web o Cal.com configurado</strong>
                            <small>El punto de entrada para capturar leads con los campos necesarios</small>
                        </div>
                    </div>
                    
                    <div class="checklist-item">
                        <div class="checklist-checkbox">‚òê</div>
                        <div class="checklist-text">
                            <strong>Webhook endpoint definido</strong>
                            <small>URL espec√≠fica donde tu formulario enviar√° los datos de leads</small>
                        </div>
                    </div>
                </div>
                
                <h3><span style="color: var(--flujo-primary);">‚öôÔ∏è</span> Durante la Implementaci√≥n</h3>
                <div class="checklist">
                    <div class="checklist-item">
                        <div class="checklist-checkbox">‚òê</div>
                        <div class="checklist-text">
                            <strong>Flujo importado correctamente</strong>
                            <small>Sin errores de importaci√≥n en N8N, todos los nodos visibles</small>
                        </div>
                    </div>
                    
                    <div class="checklist-item">
                        <div class="checklist-checkbox">‚òê</div>
                        <div class="checklist-text">
                            <strong>Credenciales configuradas</strong>
                            <small>Todas las integraciones funcionando y autenticadas correctamente</small>
                        </div>
                    </div>
                    
                    <div class="checklist-item">
                        <div class="checklist-checkbox">‚òê</div>
                        <div class="checklist-text">
                            <strong>Prompts personalizados</strong>
                            <small>Adaptados a tu ICP espec√≠fico y modelo de negocio</small>
                        </div>
                    </div>
                    
                    <div class="checklist-item">
                        <div class="checklist-checkbox">‚òê</div>
                        <div class="checklist-text">
                            <strong>Variables editadas</strong>
                            <small>Nombres de empresa, URLs, configuraciones espec√≠ficas personalizadas</small>
                        </div>
                    </div>
                    
                    <div class="checklist-item">
                        <div class="checklist-checkbox">‚òê</div>
                        <div class="checklist-text">
                            <strong>Prueba completada</strong>
                            <small>Test end-to-end con datos de ejemplo reales y verificaci√≥n de outputs</small>
                        </div>
                    </div>
                </div>
                
                <h3><span style="color: var(--flujo-primary);">üöÄ</span> Post-Implementaci√≥n</h3>
                <div class="checklist">
                    <div class="checklist-item">
                        <div class="checklist-checkbox">‚òê</div>
                        <div class="checklist-text">
                            <strong>Equipo entrenado</strong>
                            <small>Todo el equipo de ventas sabe c√≥mo interpretar y usar las notificaciones</small>
                        </div>
                    </div>
                    
                    <div class="checklist-item">
                        <div class="checklist-checkbox">‚òê</div>
                        <div class="checklist-text">
                            <strong>M√©tricas configuradas</strong>
                            <small>Tracking de conversi√≥n, tiempo de respuesta, scoring y ROI del sistema</small>
                        </div>
                    </div>
                    
                    <div class="checklist-item">
                        <div class="checklist-checkbox">‚òê</div>
                        <div class="checklist-text">
                            <strong>Documentaci√≥n creada</strong>
                            <small>Proceso documentado para futuras referencias y nuevos miembros del equipo</small>
                        </div>
                    </div>
                    
                    <div class="checklist-item">
                        <div class="checklist-checkbox">‚òê</div>
                        <div class="checklist-text">
                            <strong>Plan de optimizaci√≥n establecido</strong>
                            <small>Estrategia para revisar y mejorar el sistema continuamente</small>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Call to Action Final -->
            <section class="next-steps">
                <h2>üöÄ ¬øListo para el Siguiente Nivel?</h2>
                <p>
                    Ya tienes la arquitectura y las herramientas para construir un <strong>sistema de captaci√≥n de leads de √©lite</strong>. 
                    Pero sabemos que la implementaci√≥n t√©cnica puede ser desafiante.
                </p>
                
                <p>
                    Si al ver esto piensas: <strong>"Entiendo el poder de esto, pero no tengo el tiempo o la experiencia 
                    para implementarlo y mantenerlo a la perfecci√≥n..."</strong>
                </p>
                
                <p>
                    En Math AI Agency, <strong>ese es exactamente nuestro trabajo</strong>. Tomamos esta arquitectura y la convertimos en un 
                    sistema robusto, a medida y totalmente gestionado para tu negocio, permiti√©ndote centrarte en 
                    lo que mejor sabes hacer: construir relaciones y cerrar ventas.
                </p>
                
                <a href="#" class="cta-implementation cal-popup-trigger"
                   data-cal-link="math-ai/reunion-inicial"
                   data-cal-namespace="reunion-inicial"
                   data-cal-config='{"layout":"month_view"}'>
                    <span>üóìÔ∏è</span>
                    <span>Agendar An√°lisis de Procesos de 45 min</span>
                    <span>‚Üí</span>
                </a>
                
                <p>Sin compromiso. <strong>45 minutos de an√°lisis profundo donde dise√±aremos una soluci√≥n completamente a medida para tu negocio.</strong></p>
            </section>
        </div>
    </main>

    <!-- Footer simple -->
    <footer class="simple-footer">
        <div class="container">
            <p>¬© 2025 Math AI Agency ‚Ä¢ Automatizaci√≥n que funciona ‚Ä¢ 
               <a href="/" style="color: white; opacity: 0.8; text-decoration: none;">Volver al inicio</a>
            </p>
        </div>
    </footer>

    <!-- Cal.com element-click embed code begins -->
    <script type="text/javascript">
      (function (C, A, L) { let p = function (a, ar) { a.q.push(ar); }; let d = C.document; C.Cal = C.Cal || function () { let cal = C.Cal; let ar = arguments; if (!cal.loaded) { cal.ns = {}; cal.q = cal.q || []; d.head.appendChild(d.createElement("script")).src = A; cal.loaded = true; } if (ar[0] === L) { const api = function () { p(api, arguments); }; const namespace = ar[1]; api.q = api.q || []; if(typeof namespace === "string"){cal.ns[namespace] = cal.ns[namespace] || api;p(cal.ns[namespace], ar);p(cal, ["initNamespace", namespace]);} else p(cal, ar); return;} p(cal, ar); }; })(window, "https://app.cal.com/embed/embed.js", "init");
      
      Cal("init", "reunion-inicial", {origin:"https://cal.com"});
    
      Cal.ns["reunion-inicial"]("ui", {"hideEventTypeDetails":false,"layout":"month_view"});
    </script>
    <!-- Cal.com element-click embed code ends -->

    <script>
        // ====== FUNCIONALIDADES PROFESIONALES ======
        
        // Verificar acceso del usuario y personalizar experiencia
        function checkUserAccess() {
            const userData = localStorage.getItem('flujoCalorUser');
            if (userData) {
                const user = JSON.parse(userData);
                const welcomeElement = document.getElementById('userWelcome');
                if (welcomeElement && user.nombre) {
                    welcomeElement.innerHTML = `<span>¬°Hola <strong>${user.nombre}</strong>! Aqu√≠ est√° todo lo que necesitas üëá</span>`;
                }
                
                // Track access con datos del usuario
                trackEvent('flujo_calor_content_access', {
                    user_name: user.nombre,
                    access_time: Date.now() - user.accessTime,
                    had_webhook_error: user.webhookError || false
                });
            }
        }
        
        // Funci√≥n mejorada para copiar prompts al clipboard
        function copyToClipboard(promptId) {
            const promptText = document.getElementById(promptId).textContent;
            navigator.clipboard.writeText(promptText).then(function() {
                // Feedback visual mejorado
                const btn = event.target;
                const originalText = btn.textContent;
                btn.textContent = '‚úÖ ¬°Copiado!';
                btn.style.background = 'var(--flujo-success)';
                
                setTimeout(() => {
                    btn.textContent = originalText;
                    btn.style.background = 'var(--flujo-primary)';
                }, 2000);
                
                // Track copy action
                trackEvent('flujo_calor_prompt_copied', {
                    prompt_id: promptId,
                    prompt_length: promptText.length
                });
                
            }).catch(function() {
                // Fallback para navegadores que no soportan clipboard
                alert('Prompt copiado. Usa Ctrl+V para pegarlo en N8N.');
            });
        }
        
        // Funci√≥n mejorada para descargar plantilla N8N
        function downloadN8NTemplate() {
            // Crear contenido JSON m√°s completo y realista
            const n8nTemplate = {
                "name": "FLUJO CALOR - Math AI Agency",
                "version": 1,
                "nodes": [
                    {
                        "parameters": {
                            "httpMethod": "POST",
                            "path": "flujo-calor-webhook",
                            "responseMode": "responseNode",
                            "responseData": "allEntries"
                        },
                        "name": "üé£ Webhook - Captura Lead",
                        "type": "n8n-nodes-base.webhook",
                        "typeVersion": 1,
                        "position": [240, 300],
                        "id": "webhook-node"
                    },
                    {
                        "parameters": {
                            "model": "gpt-4",
                            "messages": {
                                "chatInput": "// PROMPT 1: Cualificaci√≥n - Pega aqu√≠ el Prompt 1 que copiaste arriba"
                            }
                        },
                        "name": "üß† IA - Cualificaci√≥n",
                        "type": "n8n-nodes-base.openAi",
                        "typeVersion": 1,
                        "position": [460, 220],
                        "id": "openai-cualificacion"
                    },
                    {
                        "parameters": {
                            "model": "gpt-4",
                            "messages": {
                                "chatInput": "// PROMPT 2: Urgencia - Pega aqu√≠ el Prompt 2 que copiaste arriba"
                            }
                        },
                        "name": "‚è±Ô∏è IA - Urgencia",
                        "type": "n8n-nodes-base.openAi",
                        "typeVersion": 1,
                        "position": [460, 340],
                        "id": "openai-urgencia"
                    },
                    {
                        "parameters": {
                            "model": "gpt-4",
                            "messages": {
                                "chatInput": "// PROMPT 3: ICP - Pega aqu√≠ el Prompt 3 que copiaste arriba"
                            }
                        },
                        "name": "üéØ IA - Encaje ICP",
                        "type": "n8n-nodes-base.openAi",
                        "typeVersion": 1,
                        "position": [460, 460],
                        "id": "openai-icp"
                    },
                    {
                        "parameters": {
                            "conditions": {
                                "number": [
                                    {
                                        "value1": "={{$json.puntuacion_lead}}",
                                        "operation": "larger",
                                        "value2": 7
                                    }
                                ]
                            }
                        },
                        "name": "üö¶ Decisi√≥n - Lead Caliente?",
                        "type": "n8n-nodes-base.if",
                        "typeVersion": 1,
                        "position": [680, 300],
                        "id": "decision-scoring"
                    },
                    {
                        "parameters": {
                            "message": "üî• LEAD CALIENTE DETECTADO!\n\nNombre: {{$json.nombre}}\nEmpresa: {{$json.empresa}}\nPuntuaci√≥n: {{$json.puntuacion_lead}}/10\nUrgencia: {{$json.nivel_urgencia}}\n\nResumen: {{$json.resumen_slack}}",
                            "channel": "#leads-calientes"
                        },
                        "name": "üì¢ Slack - Alert Caliente",
                        "type": "n8n-nodes-base.slack",
                        "typeVersion": 1,
                        "position": [900, 220],
                        "id": "slack-caliente"
                    },
                    {
                        "parameters": {
                            "message": "üìã Nuevo lead registrado\n\nNombre: {{$json.nombre}}\nEmpresa: {{$json.empresa}}\nPuntuaci√≥n: {{$json.puntuacion_lead}}/10",
                            "channel": "#leads-general"
                        },
                        "name": "üìù Slack - Alert General",
                        "type": "n8n-nodes-base.slack",
                        "typeVersion": 1,
                        "position": [900, 380],
                        "id": "slack-general"
                    }
                ],
                "connections": {
                    "üé£ Webhook - Captura Lead": {
                        "main": [
                            [
                                {"node": "üß† IA - Cualificaci√≥n", "type": "main", "index": 0},
                                {"node": "‚è±Ô∏è IA - Urgencia", "type": "main", "index": 0},
                                {"node": "üéØ IA - Encaje ICP", "type": "main", "index": 0}
                            ]
                        ]
                    },
                    "üß† IA - Cualificaci√≥n": {
                        "main": [
                            [{"node": "üö¶ Decisi√≥n - Lead Caliente?", "type": "main", "index": 0}]
                        ]
                    },
                    "üö¶ Decisi√≥n - Lead Caliente?": {
                        "main": [
                            [{"node": "üì¢ Slack - Alert Caliente", "type": "main", "index": 0}],
                            [{"node": "üìù Slack - Alert General", "type": "main", "index": 0}]
                        ]
                    }
                },
                "createdAt": new Date().toISOString(),
                "updatedAt": new Date().toISOString(),
                "settings": {
                    "timezone": "America/Mexico_City"
                },
                "staticData": {},
                "meta": {
                    "templateCredsSetupCompleted": false,
                    "instanceId": "flujo-calor-math-ai"
                }
            };
            
            // Crear descarga con nombre descriptivo
            const dataStr = "data:text/json;charset=utf-8," + encodeURIComponent(JSON.stringify(n8nTemplate, null, 2));
            const downloadAnchorNode = document.createElement('a');
            downloadAnchorNode.setAttribute("href", dataStr);
            downloadAnchorNode.setAttribute("download", "flujo-calor-n8n-template.json");
            document.body.appendChild(downloadAnchorNode);
            downloadAnchorNode.click();
            downloadAnchorNode.remove();
            
            // Track download con detalles
            trackEvent('flujo_calor_template_download', {
                file_name: 'flujo-calor-n8n-template.json',
                template_nodes: n8nTemplate.nodes.length,
                download_timestamp: Date.now()
            });
            
            // Mostrar mensaje de √©xito
            showDownloadSuccess();
        }
        
        // Funci√≥n para mostrar √©xito en descarga
        function showDownloadSuccess() {
            const successDiv = document.createElement('div');
            successDiv.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: var(--flujo-success);
                color: white;
                padding: 1rem 1.5rem;
                border-radius: 10px;
                box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
                z-index: 1000;
                animation: slideInRight 0.5s ease, fadeOut 0.5s ease 2.5s forwards;
            `;
            successDiv.innerHTML = '‚úÖ Plantilla N8N descargada correctamente';
            document.body.appendChild(successDiv);
            
            setTimeout(() => {
                document.body.removeChild(successDiv);
            }, 3000);
        }
        
        // Smooth scroll mejorado para navegaci√≥n
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                    
                    // Track navigation
                    trackEvent('flujo_calor_section_navigation', {
                        section: this.getAttribute('href'),
                        section_name: target.querySelector('.section-title')?.textContent || 'unknown'
                    });
                }
            });
        });
        
        // Checklist interactivo mejorado
        document.querySelectorAll('.checklist-checkbox').forEach(checkbox => {
            checkbox.addEventListener('click', function() {
                const isChecked = this.textContent === '‚úÖ';
                if (!isChecked) {
                    this.textContent = '‚úÖ';
                    this.style.background = 'var(--flujo-success)';
                    this.style.color = 'white';
                    this.style.borderColor = 'var(--flujo-success)';
                    
                    // Efecto de confetti mini
                    createMiniConfetti(this);
                } else {
                    this.textContent = '‚òê';
                    this.style.background = 'transparent';
                    this.style.color = 'var(--flujo-primary)';
                    this.style.borderColor = 'var(--flujo-primary)';
                }
                
                // Track checklist progress
                const totalItems = document.querySelectorAll('.checklist-checkbox').length;
                const checkedItems = document.querySelectorAll('.checklist-checkbox:contains("‚úÖ")').length;
                const progress = Math.round((checkedItems / totalItems) * 100);
                
                trackEvent('flujo_calor_checklist_progress', {
                    progress_percentage: progress,
                    total_items: totalItems,
                    checked_items: checkedItems
                });
            });
        });
        
        // Mini confetti para checklist
        function createMiniConfetti(element) {
            const colors = ['#FF4500', '#FF6B35', '#F7931E'];
            const rect = element.getBoundingClientRect();
            
            for (let i = 0; i < 5; i++) {
                const particle = document.createElement('div');
                particle.style.cssText = `
                    position: fixed;
                    width: 4px;
                    height: 4px;
                    background: ${colors[Math.floor(Math.random() * colors.length)]};
                    border-radius: 50%;
                    pointer-events: none;
                    z-index: 1000;
                    left: ${rect.left + rect.width/2}px;
                    top: ${rect.top + rect.height/2}px;
                `;
                
                document.body.appendChild(particle);
                
                const angle = (Math.PI * 2 * i) / 5;
                const velocity = 30;
                const vx = Math.cos(angle) * velocity;
                const vy = Math.sin(angle) * velocity;
                
                let x = 0, y = 0, opacity = 1;
                
                const animate = () => {
                    x += vx * 0.1;
                    y += vy * 0.1;
                    opacity -= 0.05;
                    
                    particle.style.transform = `translate(${x}px, ${y}px)`;
                    particle.style.opacity = opacity;
                    
                    if (opacity > 0) {
                        requestAnimationFrame(animate);
                    } else {
                        document.body.removeChild(particle);
                    }
                };
                
                requestAnimationFrame(animate);
            }
        }
        
        // Analytics tracking mejorado
        function trackEvent(eventName, parameters = {}) {
            if (typeof gtag !== 'undefined') {
                gtag('event', eventName, {
                    event_category: 'flujo_calor_content',
                    page_title: 'FLUJO CALOR - Contenido Completo',
                    timestamp: new Date().toISOString(),
                    ...parameters
                });
            }
            console.log('üìä FLUJO CALOR Content Event:', eventName, parameters);
        }
        
        // Scroll tracking avanzado
        let scrollMilestones = {25: false, 50: false, 75: false, 90: false};
        let maxScroll = 0;
        
        window.addEventListener('scroll', () => {
            const scrollPercent = Math.round((window.scrollY / (document.documentElement.scrollHeight - window.innerHeight)) * 100);
            maxScroll = Math.max(maxScroll, scrollPercent);
            
            Object.keys(scrollMilestones).forEach(milestone => {
                if (scrollPercent >= milestone && !scrollMilestones[milestone]) {
                    scrollMilestones[milestone] = true;
                    trackEvent('flujo_calor_content_scroll', {
                        scroll_depth: milestone,
                        max_scroll: maxScroll
                    });
                }
            });
        });
        
        // Tiempo en p√°gina y engagement
        let engagementStartTime = Date.now();
        let totalTimeOnPage = 0;
        let isVisible = true;
        
        document.addEventListener('visibilitychange', () => {
            if (document.hidden && isVisible) {
                totalTimeOnPage += Date.now() - engagementStartTime;
                isVisible = false;
                
                trackEvent('flujo_calor_content_visibility_hidden', {
                    session_time: totalTimeOnPage,
                    max_scroll_reached: maxScroll
                });
            } else if (!document.hidden && !isVisible) {
                engagementStartTime = Date.now();
                isVisible = true;
            }
        });
        
        // Tracking para botones de Calendly
        function initCalendarTracking() {
            document.querySelectorAll('.cal-popup-trigger').forEach(function(button) {
                button.addEventListener('click', function() {
                    const buttonText = this.textContent.trim();
                    trackEvent('flujo_calor_calendar_click', {
                        button_text: buttonText,
                        page_section: 'content_page_cta'
                    });
                });
            });
        }

        // Inicializaci√≥n mejorada
        document.addEventListener('DOMContentLoaded', function() {
            checkUserAccess();
            initCalendarTracking();
            
            // Track page view con contexto
            trackEvent('flujo_calor_content_page_view', {
                referrer: document.referrer,
                user_agent: navigator.userAgent,
                screen_resolution: `${screen.width}x${screen.height}`,
                viewport_size: `${window.innerWidth}x${window.innerHeight}`,
                has_user_data: !!localStorage.getItem('flujoCalorUser')
            });
            
            // A√±adir animaciones CSS necesarias
            const style = document.createElement('style');
            style.textContent = `
                @keyframes slideInRight {
                    from { transform: translateX(100%); opacity: 0; }
                    to { transform: translateX(0); opacity: 1; }
                }
                
                @keyframes fadeOut {
                    to { opacity: 0; transform: translateX(100%); }
                }
            `;
            document.head.appendChild(style);
            
            console.log('‚úÖ FLUJO CALOR Content Page Ready - Professional Version');
        });
    </script>
</body>
</html> 