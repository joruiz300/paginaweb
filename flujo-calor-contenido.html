<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FLUJO CALOR - Tu Sistema Completo de Automatización | Math AI</title>
    <meta name="description" content="Acceso completo al sistema FLUJO CALOR: plantilla N8N, prompts de IA, diagramas y checklist de implementación.">
    
    <!-- Security Headers: Content Security Policy -->
    <meta http-equiv="Content-Security-Policy" 
          content="default-src 'self'; 
                   script-src 'self' 'unsafe-inline' 'unsafe-eval' https://www.googletagmanager.com https://app.cal.com https://cal.com; 
                   style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; 
                   font-src 'self' https://fonts.gstatic.com; 
                   img-src 'self' https://res.cloudinary.com data:; 
                   connect-src 'self' https://www.google-analytics.com https://analytics.google.com https://app.cal.com; 
                   frame-src https://cal.com https://app.cal.com; 
                   object-src 'none'; 
                   base-uri 'self';">
    
    <!-- Additional Security Headers -->
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta http-equiv="X-Frame-Options" content="SAMEORIGIN">
    <meta http-equiv="X-XSS-Protection" content="1; mode=block">
    <meta http-equiv="Referrer-Policy" content="strict-origin-when-cross-origin">
    
    <!-- Open Graph / Social Media Meta Tags -->
    <meta property="og:type" content="article">
    <meta property="og:title" content="FLUJO CALOR - Tu Sistema Completo de Automatización">
    <meta property="og:description" content="Acceso completo al sistema FLUJO CALOR: plantilla N8N, prompts de IA, diagramas y checklist de implementación.">
    <meta property="og:image" content="https://res.cloudinary.com/dfuya0vrl/image/upload/v1746402411/logo_sxdfzb.png">
    <meta property="og:url" content="https://mathai.agency/flujo-calor-contenido.html">
    <meta property="og:site_name" content="Math AI Agency">
    <meta property="og:locale" content="es_ES">
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="FLUJO CALOR - Sistema Completo de Automatización">
    <meta name="twitter:description" content="Plantilla N8N, prompts de IA, diagramas y checklist completo">
    <meta name="twitter:image" content="https://res.cloudinary.com/dfuya0vrl/image/upload/v1746402411/logo_sxdfzb.png">
    
    <!-- Additional SEO Meta Tags -->
    <meta name="robots" content="noindex, nofollow">
    <meta name="theme-color" content="#0a0f1f">
    <link rel="canonical" href="https://mathai.agency/flujo-calor-contenido.html">
    
    <!-- Google Analytics 4 -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-LWV7YB90M5"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-LWV7YB90M5');
    </script>
    
    <!-- Critical CSS Inline -->
    <style>
        *{margin:0;padding:0;box-sizing:border-box}
        :root{--bg-color:#0a0f1f;--primary-orange:#FF6B00;--text-light:#FFFFFF;--text-medium:#adb5bd;--card-bg:#121a30;--border-color:#2a3652;--font-primary:'Space Grotesk',sans-serif;--font-secondary:'Work Sans',sans-serif}
        html{scroll-behavior:smooth}
        body{font-family:var(--font-secondary);background-color:var(--bg-color);color:var(--text-light);line-height:1.7;overflow-x:hidden}
        .container{width:90%;max-width:1100px;margin:0 auto}
        h1,h2,h3,h4,h5,h6{font-family:var(--font-primary);font-weight:600;color:var(--text-light);margin-bottom:1rem}
        h1{font-size:2.8rem;line-height:1.2}h2{font-size:2.2rem;line-height:1.3}h3{font-size:1.8rem}h4{font-size:1.3rem}
        p{margin-bottom:1rem;color:var(--text-medium);font-weight:400}
        a{color:var(--primary-orange);text-decoration:none;transition:color 0.3s ease}
        .text-center{text-align:center}
        .welcome-header{background:linear-gradient(135deg,var(--card-bg),rgba(18,26,48,0.8));padding:2rem 0;border-bottom:1px solid var(--border-color)}
        .welcome-title{color:var(--text-light);font-size:2.5rem;margin-bottom:0.5rem}
        .welcome-subtitle{color:var(--text-medium);font-size:1.2rem;margin-bottom:1rem}
        @media (max-width:768px){h1{font-size:2rem}h2{font-size:1.8rem}.welcome-title{font-size:2rem}}
    </style>
    
    <!-- Font preconnects -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    
    <!-- DISEÑO PROFESIONAL DESDE CERO - FONDO BLANCO -->
    <style>
        /* ============= NUEVA PALETA PROFESIONAL ============= */
        :root {
            /* FONDO BLANCO COMO SOLICITADO */
            --bg-primary: #ffffff;
            --bg-secondary: #f8fafc;
            --bg-accent: #f1f5f9;
            
            /* TEXTOS QUE SE VEN SOBRE FONDO BLANCO */
            --text-primary: #1e293b;
            --text-secondary: #475569;
            --text-muted: #64748b;
            
            /* COLORES DE MARCA */
            --orange-primary: #FF6B00;
            --orange-hot: #FF4500;
            --orange-gradient: linear-gradient(135deg, #FF6B00 0%, #FF4500 100%);
            
            /* BORDES Y SOMBRAS PARA FONDO BLANCO */
            --border-light: #e2e8f0;
            --border-medium: #cbd5e1;
            --shadow-sm: 0 2px 4px rgba(0, 0, 0, 0.1);
            --shadow-md: 0 4px 12px rgba(0, 0, 0, 0.15);
            --shadow-lg: 0 8px 25px rgba(0, 0, 0, 0.2);
            
            /* ESPACIADO COMPACTO */
            --space-xs: 0.5rem;
            --space-sm: 1rem;
            --space-md: 1.5rem;
            --space-lg: 2rem;
            --space-xl: 3rem;
        }

        /* ============= PÁGINA MINIMALISTA PROFESIONAL ============= */
        .contenido-page {
            background: var(--bg-primary);
            min-height: 100vh;
            color: var(--text-primary);
            font-family: 'Work Sans', sans-serif;
            line-height: 1.6;
        }

        /* Header limpio y centrado */
        .welcome-header {
            background: var(--bg-primary);
            border-bottom: 1px solid var(--border-light);
            padding: var(--space-xl) 0;
            text-align: center;
        }

        .welcome-title {
            font-family: 'Space Grotesk', sans-serif;
            font-size: clamp(2rem, 4vw, 2.8rem);
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: var(--space-sm);
        }

        .welcome-subtitle {
            font-size: 1.2rem;
            color: var(--text-secondary);
            margin-bottom: var(--space-lg);
            font-weight: 400;
        }

        .user-welcome {
            background: var(--orange-gradient);
            color: white;
            padding: var(--space-sm) var(--space-lg);
            border-radius: 50px;
            display: inline-block;
            font-weight: 600;
            font-size: 0.95rem;
            box-shadow: var(--shadow-sm);
        }

        /* ============= NAVEGACIÓN MINIMALISTA ============= */
        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 0 var(--space-lg);
        }

        .nav-title {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 2rem;
            color: var(--text-primary);
            text-align: center;
            margin: var(--space-xl) 0 var(--space-lg) 0;
            font-weight: 600;
        }

        .nav-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: var(--space-md);
            margin-bottom: var(--space-xl);
        }

        .nav-item {
            background: var(--bg-secondary);
            border: 1px solid var(--border-light);
            border-radius: 12px;
            padding: var(--space-md);
            display: flex;
            align-items: center;
            gap: var(--space-md);
            text-decoration: none;
            transition: all 0.2s ease;
            border-left: 3px solid var(--orange-primary);
        }

        .nav-item:hover {
            box-shadow: var(--shadow-md);
            transform: translateY(-2px);
        }

        .nav-icon {
            font-size: 1.8rem;
            width: 40px;
            height: 40px;
            background: var(--orange-gradient);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            color: white;
        }

        .nav-info h3 {
            font-family: 'Space Grotesk', sans-serif;
            color: var(--text-primary);
            font-size: 1rem;
            margin-bottom: 0.2rem;
            font-weight: 600;
        }

        .nav-info p {
            color: var(--text-secondary);
            font-size: 0.85rem;
            margin: 0;
            line-height: 1.4;
        }

        /* ============= SECCIONES MINIMALISTAS ============= */
        .content-section {
            margin: var(--space-xl) 0;
            padding: 0;
        }

        .section-title {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 1.8rem;
            color: var(--text-primary);
            margin-bottom: var(--space-lg);
            font-weight: 600;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: var(--space-sm);
        }

        .section-icon {
            font-size: 1.5rem;
            color: var(--orange-primary);
        }

        .section-description {
            font-size: 1rem;
            color: var(--text-secondary);
            margin-bottom: var(--space-lg);
            line-height: 1.6;
            text-align: center;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        .section-description strong {
            color: var(--text-primary);
            font-weight: 600;
        }

        /* ============= TIMELINE MINIMALISTA Y COMPACTA ============= */
        .etapas-container {
            background: var(--bg-secondary);
            border: 1px solid var(--border-light);
            border-radius: 12px;
            padding: var(--space-lg);
            margin: var(--space-lg) 0;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
        }

        .etapas-header {
            text-align: center;
            font-family: 'Space Grotesk', sans-serif;
            font-size: 1.6rem;
            color: var(--text-primary);
            margin-bottom: var(--space-sm);
            font-weight: 600;
        }

        .etapas-subtitle {
            text-align: center;
            color: var(--text-secondary);
            font-size: 1rem;
            margin-bottom: var(--space-lg);
            font-weight: 400;
        }

        /* TIMELINE HORIZONTAL COMPACTA */
        .etapas-timeline-clean {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: var(--space-sm);
            margin: var(--space-lg) 0;
        }

        .etapa-item {
            background: var(--bg-primary);
            border: 1px solid var(--border-light);
            border-radius: 8px;
            padding: var(--space-md);
            text-align: center;
            position: relative;
            transition: all 0.2s ease;
        }

        .etapa-item:hover {
            box-shadow: var(--shadow-md);
            border-color: var(--orange-primary);
        }

        .etapa-number {
            width: 30px;
            height: 30px;
            background: var(--orange-gradient);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Space Grotesk', sans-serif;
            font-size: 0.9rem;
            font-weight: 600;
            margin: 0 auto var(--space-sm) auto;
        }

        .etapa-time {
            background: var(--bg-accent);
            color: var(--orange-primary);
            padding: 0.2rem 0.5rem;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 600;
            display: inline-block;
            margin-bottom: var(--space-xs);
        }

        .etapa-titulo {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: var(--space-xs);
            line-height: 1.2;
        }

        .etapa-info {
            font-size: 0.75rem;
            color: var(--text-muted);
            line-height: 1.3;
        }

        .etapa-info p {
            margin: 0.2rem 0;
        }

        .etapa-info strong {
            color: var(--text-secondary);
            font-weight: 500;
        }

        /* ============= ELEMENTOS MINIMALISTAS ============= */
        
        /* Prompts compactos */
        .prompt-container {
            background: var(--bg-secondary);
            border: 1px solid var(--border-light);
            border-radius: 8px;
            margin: var(--space-md) 0;
            overflow: hidden;
        }

        .prompt-header {
            background: var(--bg-accent);
            padding: var(--space-md);
            border-bottom: 1px solid var(--border-light);
        }

        .prompt-title {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 1.1rem;
            color: var(--text-primary);
            margin-bottom: var(--space-xs);
            font-weight: 600;
        }

        .prompt-description {
            color: var(--text-secondary);
            font-size: 0.9rem;
            margin: 0;
            line-height: 1.4;
        }

        .code-block {
            position: relative;
            background: #f8fafc;
            border: 1px solid var(--border-medium);
            font-family: 'Fira Code', monospace;
            font-size: 0.8rem;
            line-height: 1.4;
            color: var(--text-primary);
            padding: var(--space-md);
            overflow-x: auto;
        }

        .copy-btn {
            position: absolute;
            top: 8px;
            right: 8px;
            background: var(--orange-gradient);
            color: white;
            border: none;
            padding: 0.3rem 0.6rem;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .copy-btn:hover {
            transform: translateY(-1px);
        }

        /* Areas de descarga */
        .download-area, .highlight-box {
            background: var(--bg-accent);
            border: 1px solid var(--border-light);
            border-radius: 8px;
            padding: var(--space-md);
            margin: var(--space-md) 0;
        }

        .download-title {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 1.1rem;
            color: var(--text-primary);
            margin-bottom: var(--space-xs);
            font-weight: 600;
        }

        .download-description {
            color: var(--text-secondary);
            margin-bottom: var(--space-md);
            font-size: 0.9rem;
            line-height: 1.4;
        }

        .download-btn {
            display: inline-flex;
            align-items: center;
            gap: var(--space-xs);
            background: var(--orange-gradient);
            color: white;
            padding: var(--space-sm) var(--space-md);
            border-radius: 6px;
            text-decoration: none;
            font-weight: 600;
            font-size: 0.9rem;
            transition: all 0.2s ease;
        }

        .download-btn:hover {
            transform: translateY(-1px);
            box-shadow: var(--shadow-sm);
        }

        /* Checklist minimalista */
        .checklist {
            margin: var(--space-md) 0;
        }

        .checklist-item {
            display: flex;
            align-items: flex-start;
            gap: var(--space-sm);
            background: var(--bg-primary);
            border: 1px solid var(--border-light);
            border-radius: 6px;
            padding: var(--space-sm);
            margin-bottom: var(--space-sm);
            transition: all 0.2s ease;
        }

        .checklist-item:hover {
            background: var(--bg-secondary);
            border-color: var(--orange-primary);
        }

        .checklist-checkbox {
            font-size: 1rem;
            color: var(--orange-primary);
            font-weight: bold;
            cursor: pointer;
            user-select: none;
            min-width: 16px;
        }

        .checklist-text strong {
            color: var(--text-primary);
            font-size: 0.9rem;
            display: block;
            margin-bottom: 0.2rem;
            font-weight: 600;
        }

        .checklist-text small {
            color: var(--text-secondary);
            font-size: 0.8rem;
            line-height: 1.3;
        }

        /* CTA final */
        .next-steps {
            background: var(--bg-secondary);
            border: 1px solid var(--border-light);
            border-radius: 12px;
            padding: var(--space-xl);
            text-align: center;
            margin: var(--space-xl) 0;
        }

        .next-steps h2 {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 1.6rem;
            color: var(--text-primary);
            margin-bottom: var(--space-md);
            font-weight: 600;
        }

        .next-steps p {
            font-size: 1rem;
            color: var(--text-secondary);
            margin-bottom: var(--space-md);
            line-height: 1.5;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        .next-steps strong {
            color: var(--text-primary);
            font-weight: 600;
        }

        .cta-implementation {
            display: inline-flex;
            align-items: center;
            gap: var(--space-sm);
            background: var(--orange-gradient);
            color: white;
            padding: var(--space-md) var(--space-lg);
            border-radius: 8px;
            text-decoration: none;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.2s ease;
            margin: var(--space-md) 0;
        }

        .cta-implementation:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        /* Footer minimalista */
        .simple-footer {
            background: var(--bg-secondary);
            border-top: 1px solid var(--border-light);
            padding: var(--space-lg) 0;
            text-align: center;
            margin-top: var(--space-xl);
        }

        .simple-footer p {
            color: var(--text-muted);
            margin: 0;
            font-size: 0.9rem;
        }

        .simple-footer a {
            color: var(--text-secondary);
            transition: color 0.2s ease;
        }

        .simple-footer a:hover {
            color: var(--orange-primary);
        }

        /* Títulos de sección */
        .content-section h3 {
            color: var(--text-primary);
            font-family: 'Space Grotesk', sans-serif;
            font-size: 1.2rem;
            margin: var(--space-lg) 0 var(--space-md) 0;
            font-weight: 600;
        }

        /* Listas simples */
        .instruction-list {
            color: var(--text-secondary);
            margin-left: var(--space-md);
        }

        .instruction-list li {
            margin-bottom: var(--space-sm);
            line-height: 1.4;
            font-size: 0.9rem;
        }

        .instruction-list strong {
            color: var(--text-primary);
            font-weight: 600;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .container {
                padding: 0 var(--space-md);
            }
            
            .nav-grid {
                grid-template-columns: 1fr;
            }
            
            .etapas-timeline-clean {
                grid-template-columns: 1fr;
                gap: var(--space-sm);
            }
            
            .section-title {
                font-size: 1.5rem;
            }
        }

         /* ======= PROMPTS Y RESTO DEL CONTENIDO PROFESIONAL ======= */
         
         /* Prompts profesionales */
         .prompt-container {
             background: var(--bg-primary);
             border: 1px solid var(--border-secondary);
             border-radius: 16px;
             margin: var(--space-xl) 0;
             overflow: hidden;
             box-shadow: var(--shadow-md);
         }

         .prompt-header {
             background: var(--bg-accent);
             padding: var(--space-lg);
             border-bottom: 1px solid var(--border-secondary);
         }

         .prompt-title {
             font-family: 'Space Grotesk', sans-serif;
             font-size: 1.3rem;
             color: var(--text-primary);
             margin-bottom: var(--space-sm);
             font-weight: 600;
         }

         .prompt-description {
             color: var(--text-secondary); /* CONTRASTE MEJORADO */
             font-size: 1rem;
             margin: 0;
             line-height: 1.6;
         }

         .code-block {
             position: relative;
             background: #1e293b;
             font-family: 'Fira Code', monospace;
             font-size: 0.9rem;
             line-height: 1.6;
             color: #e2e8f0;
             padding: var(--space-lg);
             overflow-x: auto;
             border-top: 1px solid var(--border-secondary);
         }

         .copy-btn {
             position: absolute;
             top: var(--space-sm);
             right: var(--space-sm);
             background: var(--orange-gradient);
             color: white;
             border: none;
             padding: 0.5rem 1rem;
             border-radius: 8px;
             font-size: 0.85rem;
             font-weight: 600;
             cursor: pointer;
             transition: all 0.3s ease;
             z-index: 2;
         }

         .copy-btn:hover {
             transform: translateY(-2px);
             box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
         }

         /* Download areas */
         .download-area, .highlight-box {
             background: var(--bg-accent);
             border: 1px solid var(--border-secondary);
             border-radius: 16px;
             padding: var(--space-lg);
             margin: var(--space-xl) 0;
         }

         .download-title {
             font-family: 'Space Grotesk', sans-serif;
             font-size: 1.3rem;
             color: var(--text-primary);
             margin-bottom: var(--space-sm);
             font-weight: 600;
         }

         .download-description {
             color: var(--text-secondary); /* CONTRASTE MEJORADO */
             margin-bottom: var(--space-lg);
             font-size: 1rem;
             line-height: 1.6;
         }

         .download-btn {
             display: inline-flex;
             align-items: center;
             gap: var(--space-sm);
             background: var(--orange-gradient);
             color: white;
             padding: var(--space-md) var(--space-lg);
             border-radius: 12px;
             text-decoration: none;
             font-weight: 600;
             transition: all 0.3s ease;
             box-shadow: var(--shadow-md);
         }

         .download-btn:hover {
             transform: translateY(-3px);
             box-shadow: var(--shadow-lg);
         }

         /* Listas */
         .instruction-list {
             color: var(--text-secondary);
             margin-left: var(--space-lg);
         }

         .instruction-list li {
             margin-bottom: var(--space-sm);
             line-height: 1.6;
         }

         .instruction-list strong {
             color: var(--text-primary); /* CONTRASTE PERFECTO */
             font-weight: 600;
         }

         /* Checklist */
         .checklist {
             margin: var(--space-lg) 0;
         }

         .checklist-item {
             display: flex;
             align-items: flex-start;
             gap: var(--space-md);
             background: var(--bg-primary);
             border: 1px solid var(--border-primary);
             border-radius: 12px;
             padding: var(--space-md);
             margin-bottom: var(--space-md);
             transition: all 0.3s ease;
         }

         .checklist-item:hover {
             border-color: var(--orange-primary);
             transform: translateX(4px);
         }

         .checklist-checkbox {
             font-size: 1.2rem;
             color: var(--orange-primary);
             font-weight: bold;
             cursor: pointer;
             user-select: none;
             transition: all 0.2s ease;
         }

         .checklist-checkbox:hover {
             transform: scale(1.2);
         }

         .checklist-text strong {
             color: var(--text-primary); /* CONTRASTE PERFECTO */
             font-size: 1rem;
             display: block;
             margin-bottom: 0.3rem;
             font-weight: 600;
         }

         .checklist-text small {
             color: var(--text-secondary); /* CONTRASTE MEJORADO */
             font-size: 0.9rem;
             line-height: 1.5;
         }

         /* CTA final */
         .next-steps {
             background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-accent) 100%);
             border: 2px solid var(--border-secondary);
             border-radius: 20px;
             padding: var(--space-2xl);
             text-align: center;
             margin: var(--space-2xl) 0;
             position: relative;
             overflow: hidden;
         }

         .next-steps::before {
             content: '';
             position: absolute;
             top: 0; left: 0; right: 0; bottom: 0;
             background: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23FF6B00' fill-opacity='0.02'%3E%3Cpath d='M12 6h36v36H12z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E") repeat;
             pointer-events: none;
         }

         .next-steps h2 {
             font-family: 'Space Grotesk', sans-serif;
             font-size: clamp(1.8rem, 4vw, 2.2rem);
             color: var(--text-primary);
             margin-bottom: var(--space-lg);
             font-weight: 700;
             position: relative;
             z-index: 2;
         }

         .next-steps p {
             font-size: 1.1rem;
             color: var(--text-secondary); /* CONTRASTE MEJORADO */
             margin-bottom: var(--space-lg);
             line-height: 1.7;
             max-width: 800px;
             margin-left: auto;
             margin-right: auto;
             position: relative;
             z-index: 2;
         }

         .next-steps strong {
             color: var(--text-primary); /* CONTRASTE PERFECTO */
             font-weight: 600;
         }

         .cta-implementation {
             display: inline-flex;
             align-items: center;
             gap: var(--space-sm);
             background: var(--orange-gradient);
             color: white;
             padding: var(--space-md) var(--space-xl);
             border-radius: 12px;
             text-decoration: none;
             font-size: 1.1rem;
             font-weight: 600;
             transition: all 0.3s ease;
             box-shadow: var(--shadow-lg);
             margin: var(--space-lg) 0;
             position: relative;
             z-index: 2;
         }

         .cta-implementation:hover {
             transform: translateY(-3px);
             box-shadow: 0 25px 50px rgba(0, 0, 0, 0.6);
         }

         /* Footer */
         .simple-footer {
             background: var(--bg-primary);
             border-top: 1px solid var(--border-primary);
             padding: var(--space-xl) 0;
             text-align: center;
             margin-top: var(--space-2xl);
         }

         .simple-footer p {
             color: var(--text-muted);
             margin: 0;
         }

         .simple-footer a {
             color: var(--text-secondary);
             transition: color 0.3s ease;
         }

         .simple-footer a:hover {
             color: var(--orange-primary);
         }

         /* Títulos de sección con iconos */
         .content-section h3 {
             color: var(--text-primary); /* CONTRASTE PERFECTO */
             font-family: 'Space Grotesk', sans-serif;
             font-size: 1.4rem;
             margin: var(--space-xl) 0 var(--space-lg) 0;
             font-weight: 600;
             display: flex;
             align-items: center;
             gap: var(--space-sm);
         }

         /* Texto general mejorado */
         .content-section p {
             color: var(--text-secondary); /* CONTRASTE MEJORADO */
             font-size: 1rem;
             line-height: 1.7;
             margin-bottom: var(--space-md);
         }

         .content-section p strong {
             color: var(--text-primary); /* CONTRASTE PERFECTO */
             font-weight: 600;
         }

         /* Highlighting de información importante */
         .highlight-box h4 {
             color: var(--text-primary);
             font-family: 'Space Grotesk', sans-serif;
             font-size: 1.2rem;
             margin-bottom: var(--space-sm);
             font-weight: 600;
         }

         .highlight-box p, .highlight-box ul {
             color: var(--text-secondary);
             font-size: 1rem;
             line-height: 1.6;
         }

         .highlight-box ul {
             margin-left: var(--space-lg);
         }

         .highlight-box li {
             margin-bottom: 0.8rem;
         }

         .highlight-box strong {
             color: var(--text-primary);
             font-weight: 600;
         }
     </style>
     
     <!-- Async load stylesheets -->
    <link rel="preload" href="style.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <link rel="preload" href="lead-magnet.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript>
        <link rel="stylesheet" href="style.css">
        <link rel="stylesheet" href="lead-magnet.css">
    </noscript>
    
    <!-- Async load fonts -->
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;600;700&family=Work+Sans:wght@400;500&family=Fira+Code:wght@400;500&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;600;700&family=Work+Sans:wght@400;500&family=Fira+Code:wght@400;500&display=swap"></noscript>
    <link rel="icon" href="https://res.cloudinary.com/dfuya0vrl/image/upload/v1746402411/logo_sxdfzb.png" type="image/png">
</head>
<body class="contenido-page">
    <!-- Header minimalista -->
    <header class="welcome-header">
        <div class="container">
            <h1 class="welcome-title">🔥 Flujo de Calor Activado</h1>
            <p class="welcome-subtitle">Tu automatización está funcionando perfectamente</p>
            <div class="user-welcome">✅ Sistema operativo</div>
        </div>
    </header>

    <main class="contenido-principal">
        <div class="container">
            
            <!-- Navegación compacta -->
            <h2 class="nav-title">📋 Contenido del Flujo</h2>
            <div class="nav-grid">
                <a href="#timeline" class="nav-item">
                    <div class="nav-icon">⚡</div>
                    <div class="nav-info">
                        <h3>Timeline</h3>
                        <p>5 etapas compactas</p>
                    </div>
                </a>
                
                <a href="#prompts" class="nav-item">
                    <div class="nav-icon">🤖</div>
                    <div class="nav-info">
                        <h3>Prompts IA</h3>
                        <p>3 prompts listos</p>
                    </div>
                </a>
                
                <a href="#plantilla" class="nav-item">
                    <div class="nav-icon">⚙️</div>
                    <div class="nav-info">
                        <h3>Plantilla N8N</h3>
                        <p>Archivo completo</p>
                    </div>
                </a>
                
                <a href="#checklist" class="nav-item">
                    <div class="nav-icon">✅</div>
                    <div class="nav-info">
                        <h3>Checklist</h3>
                        <p>Pasos a seguir</p>
                    </div>
                </a>
            </div>

            <!-- Timeline compacta -->
            <section id="timeline" class="content-section">
                <h2 class="section-title">
                    <span class="section-icon">⚡</span>
                    Timeline del Flujo de Calor
                </h2>
                
                <p class="section-description">
                    5 etapas automatizadas que transforman leads en oportunidades calificadas
                </p>
                
                <div class="etapas-container">
                    <h3 class="etapas-header">Flujo Completo</h3>
                    <p class="etapas-subtitle">Automatización de extremo a extremo</p>
                    
                    <div class="etapas-timeline-clean">
                        
                        <!-- Etapa 1 -->
                        <div class="etapa-item">
                            <div class="etapa-number">1</div>
                            <div class="etapa-time">&lt;30s</div>
                            <h4 class="etapa-titulo">Captura</h4>
                            <div class="etapa-info">
                                <p><strong>Trigger:</strong> Webhook/Cal.com/Formulario web</p>
                                <p><strong>Velocidad:</strong> &lt; 30 segundos desde captura</p>
                                <p><strong>Objetivo:</strong> Activación instantánea del flujo</p>
                            </div>
                        </div>
                        
                        <!-- Etapa 2 -->
                        <div class="etapa-item">
                            <div class="etapa-number">2</div>
                            <div class="etapa-time">~2min</div>
                            <h4 class="etapa-titulo">Análisis IA</h4>
                            <div class="etapa-info">
                                <p><strong>Proceso:</strong> Análisis inteligente del lead</p>
                                <p><strong>Output:</strong> Puntuación y categorización</p>
                            </div>
                        </div>
                        
                        <!-- Etapa 3 -->
                        <div class="etapa-item">
                            <div class="etapa-number">3</div>
                            <div class="etapa-time">~30s</div>
                            <h4 class="etapa-titulo">Decisión</h4>
                            <div class="etapa-info">
                                <p><strong>Logic:</strong> Segmentación automática</p>
                                <p><strong>Caminos:</strong> Caliente | Tibio | Frío</p>
                            </div>
                        </div>
                        
                        <!-- Etapa 4 -->
                        <div class="etapa-item">
                            <div class="etapa-number">4</div>
                            <div class="etapa-time">~1min</div>
                            <h4 class="etapa-titulo">Acción</h4>
                            <div class="etapa-info">
                                <p><strong>CRM:</strong> Actualización automática</p>
                                <p><strong>Notificación:</strong> Alerta al equipo</p>
                            </div>
                        </div>
                        
                        <!-- Etapa 5 -->
                        <div class="etapa-item">
                            <div class="etapa-number">5</div>
                            <div class="etapa-time">24-48h</div>
                            <h4 class="etapa-titulo">Seguimiento</h4>
                            <div class="etapa-info">
                                <p><strong>Recordatorios:</strong> Citas agendadas</p>
                                <p><strong>Nurturing:</strong> Leads no listos</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Prompts de IA -->
            <section id="prompts" class="content-section">
                <h2 class="section-title">
                    <span class="section-icon">🤖</span>
                    Prompts de IA
                </h2>
                
                <p class="section-description">
                    3 prompts optimizados para análisis automático de leads
                </p>
                
                <!-- Prompt 1 -->
                <div class="prompt-container">
                    <div class="prompt-header">
                        <h3 class="prompt-title">Prompt 1: Cualificación y Puntuación</h3>
                        <p class="prompt-description">Analiza y puntúa leads automáticamente</p>
                    </div>
                    <div class="code-block">
                        <button class="copy-btn" onclick="copyToClipboard('prompt1')">📋 Copiar</button>
<div id="prompt1">## ROL
Eres un Asistente de Ventas B2B experto en cualificar leads.

## TAREA
Analiza la información del lead y responde con JSON:
1. Puntuación de 1 a 10
2. Necesidad principal
3. Nombre de empresa
4. Resumen de 20 palabras

## INFORMACIÓN DEL LEAD:
- Nombre: {{$json.body.payload.attendee.name}}
- Email: {{$json.body.payload.attendee.email}}
- Empresa: {{$json.body.payload.responses.company.value}}
- Cargo: {{$json.body.payload.responses.role.value}}
- Necesidad: {{$json.body.payload.responses.need.value}}

## OUTPUT:
{
  "puntuacion_lead": <número_del_1_al_10>,
  "necesidad_principal": "<resumen_necesidad>",
  "nombre_empresa": "<empresa>",
  "resumen_slack": "<resumen_20_palabras>"
}</div>
                    </div>
                </div>
                
                <!-- Prompt 2 -->
                <div class="prompt-container">
                    <div class="prompt-header">
                        <h3 class="prompt-title">Prompt 2: Detección de Urgencia</h3>
                        <p class="prompt-description">Detecta nivel de urgencia del lead</p>
                    </div>
                    <div class="code-block">
                        <button class="copy-btn" onclick="copyToClipboard('prompt2')">📋 Copiar</button>
<div id="prompt2">## ROL
Analista de ventas especializado en detectar urgencia de compra.

## TAREA
Analiza la descripción y clasifica urgencia. Busca palabras como "ahora", "urgente", "inmediato" vs "futuro", "explorando".

## INFORMACIÓN:
- Necesidad: {{$json.body.payload.responses.need.value}}

## OUTPUT:
{
  "nivel_urgencia": "<Alta|Media|Baja>",
  "señal_detectada": "<palabra_clave_justificativa>"
}</div>
                    </div>
                </div>
                
                <!-- Prompt 3 -->
                <div class="prompt-container">
                    <div class="prompt-header">
                        <h3 class="prompt-title">Prompt 3: Respuesta Personalizada</h3>
                        <p class="prompt-description">Genera respuesta automática personalizada</p>
                    </div>
                    <div class="code-block">
                        <button class="copy-btn" onclick="copyToClipboard('prompt3')">📋 Copiar</button>
<div id="prompt3">## ROL
Especialista en comunicación B2B que escribe emails personalizados.

## TAREA
Genera un email de respuesta automática personalizado basado en la información del lead.

## INFORMACIÓN:
- Nombre: {{$json.body.payload.attendee.name}}
- Empresa: {{$json.body.payload.responses.company.value}}
- Necesidad: {{$json.body.payload.responses.need.value}}

## FORMATO:
Asunto: [Asunto personalizado]
---
[Email personalizado de 100-150 palabras]</div>
                    </div>
            </section>

            <!-- Plantilla N8N -->
            <section id="plantilla" class="content-section">
                <h2 class="section-title">
                    <span class="section-icon">⚙️</span>
                    Plantilla N8N
                </h2>
                
                <p class="section-description">
                    Flujo completo listo para importar y personalizar
                </p>
                
                <div class="download-area">
                    <h3 class="download-title">Descarga la Plantilla</h3>
                    <p class="download-description">Archivo .json optimizado para N8N</p>
                    <a href="#" class="download-btn" onclick="downloadN8NTemplate()">
                        📁 Descargar flujo-calor-n8n.json
                    </a>
                </div>
                
                <div class="highlight-box">
                    <h4>⚠️ Importante:</h4>
                    <p>Esta plantilla requiere configuración personalizada:</p>
                    <ul class="instruction-list">
                        <li><strong>Configura credenciales API</strong> (OpenAI, CRM, Slack)</li>
                        <li><strong>Adapta prompts</strong> a tu negocio</li>
                        <li><strong>Conecta herramientas</strong> específicas</li>
                        <li><strong>Personaliza variables</strong> del flujo</li>
                    </ul>
                </div>
            </section>

            <!-- Checklist -->
            <section id="checklist" class="content-section">
                <h2 class="section-title">
                    <span class="section-icon">✅</span>
                    Checklist de Implementación
                </h2>
                
                <p class="section-description">
                    Pasos esenciales para implementar el flujo correctamente
                </p>
                
                <h3>Pre-Implementación</h3>
                <div class="checklist">
                    <div class="checklist-item">
                        <div class="checklist-checkbox">☐</div>
                        <div class="checklist-text">
                            <strong>N8N instalado</strong>
                            <small>Instancia operativa con permisos de administrador</small>
                        </div>
                    </div>
                    
                    <div class="checklist-item">
                        <div class="checklist-checkbox">☐</div>
                        <div class="checklist-text">
                            <strong>API Keys obtenidas</strong>
                            <small>OpenAI, CRM, Slack y email service</small>
                        </div>
                    </div>
                    
                    <div class="checklist-item">
                        <div class="checklist-checkbox">☐</div>
                        <div class="checklist-text">
                            <strong>Formulario configurado</strong>
                            <small>Cal.com o formulario web con campos necesarios</small>
                        </div>
                    </div>
                </div>
                
                <h3>Implementación</h3>
                <div class="checklist">
                    <div class="checklist-item">
                        <div class="checklist-checkbox">☐</div>
                        <div class="checklist-text">
                            <strong>Flujo importado</strong>
                            <small>Sin errores, todos los nodos visibles</small>
                        </div>
                    </div>
                    
                    <div class="checklist-item">
                        <div class="checklist-checkbox">☐</div>
                        <div class="checklist-text">
                            <strong>Credenciales configuradas</strong>
                            <small>Integraciones autenticadas correctamente</small>
                        </div>
                    </div>
                    
                    <div class="checklist-item">
                        <div class="checklist-checkbox">☐</div>
                        <div class="checklist-text">
                            <strong>Prompts personalizados</strong>
                            <small>Adaptados a tu ICP específico</small>
                        </div>
                    </div>
                    
                    <div class="checklist-item">
                        <div class="checklist-checkbox">☐</div>
                        <div class="checklist-text">
                            <strong>Pruebas completadas</strong>
                            <small>Test end-to-end con datos de ejemplo</small>
                        </div>
                    </div>
                </div>
                
                <h3>Post-Implementación</h3>
                <div class="checklist">
                    <div class="checklist-item">
                        <div class="checklist-checkbox">☐</div>
                        <div class="checklist-text">
                            <strong>Equipo entrenado</strong>
                            <small>Todo el equipo sabe usar las notificaciones</small>
                        </div>
                    </div>
                    
                    <div class="checklist-item">
                        <div class="checklist-checkbox">☐</div>
                        <div class="checklist-text">
                            <strong>Métricas configuradas</strong>
                            <small>Tracking de conversión y ROI</small>
                        </div>
                    </div>
                </div>
            </section>

            <!-- CTA Final -->
            <section class="next-steps">
                <h2>🚀 ¿Necesitas Implementación Profesional?</h2>
                <p>
                    Si quieres que implementemos y optimicemos todo el sistema por ti, 
                    <strong>agenda una consulta sin compromiso</strong>.
                </p>
                
                <a href="#" class="cta-implementation cal-popup-trigger"
                   data-cal-link="math-ai/reunion-inicial"
                   data-cal-namespace="reunion-inicial"
                   data-cal-config='{"layout":"month_view"}'>
                    🗓️ Agendar Consulta Gratuita
                </a>
                
                <p>45 minutos donde analizaremos tu proceso actual y diseñaremos una solución a medida.</p>
            </section>
        </div>
    </main>

    <!-- Footer simple -->
    <footer class="simple-footer">
        <div class="container">
            <p>© 2025 Math AI Agency • <a href="/">Volver al inicio</a></p>
        </div>
    </footer>

    <!-- Cal.com element-click embed code begins -->
    <script type="text/javascript">
      (function (C, A, L) { let p = function (a, ar) { a.q.push(ar); }; let d = C.document; C.Cal = C.Cal || function () { let cal = C.Cal; let ar = arguments; if (!cal.loaded) { cal.ns = {}; cal.q = cal.q || []; d.head.appendChild(d.createElement("script")).src = A; cal.loaded = true; } if (ar[0] === L) { const api = function () { p(api, arguments); }; const namespace = ar[1]; api.q = api.q || []; if(typeof namespace === "string"){cal.ns[namespace] = cal.ns[namespace] || api;p(cal.ns[namespace], ar);p(cal, ["initNamespace", namespace]);} else p(cal, ar); return;} p(cal, ar); }; })(window, "https://app.cal.com/embed/embed.js", "init");
      
      Cal("init", "reunion-inicial", {origin:"https://cal.com"});
    
      Cal.ns["reunion-inicial"]("ui", {"hideEventTypeDetails":false,"layout":"month_view"});
    </script>
    <!-- Cal.com element-click embed code ends -->

    <!-- Schema.org Structured Data for FLUJO CALOR Content -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "Product",
        "name": "FLUJO CALOR - Sistema de Automatización de Leads",
        "description": "Sistema completo que convierte leads fríos en citas calientes automáticamente en menos de 2 minutos usando N8N e IA",
        "brand": {
            "@type": "Organization",
            "name": "Math AI Agency"
        },
        "category": "Business Automation Software",
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "USD",
            "availability": "https://schema.org/InStock",
            "priceValidUntil": "2025-12-31",
            "description": "Acceso gratuito al sistema FLUJO CALOR completo"
        },
        "includesObject": [
            {
                "@type": "SoftwareApplication",
                "name": "Plantilla N8N FLUJO CALOR",
                "applicationCategory": "Business Automation",
                "operatingSystem": "Web-based"
            },
            {
                "@type": "DigitalDocument",
                "name": "3 Prompts de IA Optimizados",
                "description": "Prompts específicos para cualificación, urgencia y análisis de ICP"
            },
            {
                "@type": "DigitalDocument", 
                "name": "Diagrama Estratégico Visual",
                "description": "Las 5 etapas del FLUJO CALOR paso a paso"
            },
            {
                "@type": "DigitalDocument",
                "name": "Checklist de Implementación",
                "description": "Guía paso a paso completa para implementar el sistema"
            }
        ],
        "audience": {
            "@type": "BusinessAudience",
            "audienceType": "PYME de servicios B2B"
        }
    }
    </script>

    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "HowTo",
        "name": "Cómo Implementar el Sistema FLUJO CALOR",
        "description": "Guía completa para implementar automatización de leads con respuesta en menos de 2 minutos",
        "image": "https://res.cloudinary.com/dfuya0vrl/image/upload/v1746402411/logo_sxdfzb.png",
        "totalTime": "PT2H",
        "estimatedCost": {
            "@type": "MonetaryAmount",
            "currency": "USD",
            "value": "0"
        },
        "supply": [
            {
                "@type": "HowToSupply",
                "name": "Cuenta N8N"
            },
            {
                "@type": "HowToSupply", 
                "name": "API Key OpenAI"
            },
            {
                "@type": "HowToSupply",
                "name": "CRM (HubSpot/Pipedrive)"
            }
        ],
        "step": [
            {
                "@type": "HowToStep",
                "name": "Pre-Implementación",
                "text": "Configurar N8N, obtener API Keys y preparar formulario web"
            },
            {
                "@type": "HowToStep",
                "name": "Importar Plantilla",
                "text": "Importar el archivo JSON en N8N y configurar credenciales"
            },
            {
                "@type": "HowToStep",
                "name": "Personalizar Prompts",
                "text": "Adaptar los prompts de IA a tu ICP específico"
            },
            {
                "@type": "HowToStep",
                "name": "Pruebas",
                "text": "Realizar pruebas end-to-end con datos de ejemplo"
            },
            {
                "@type": "HowToStep",
                "name": "Post-Implementación",
                "text": "Entrenar equipo, configurar métricas y documentar proceso"
            }
        ]
    }
    </script>

    <!-- CSS Loading Fallback -->
    <script>
        (function(){
            var links = document.querySelectorAll('link[rel="preload"][as="style"]');
            for (var i = 0; i < links.length; i++) {
                if (!links[i].onload) {
                    links[i].rel = 'stylesheet';
                }
            }
        })();
    </script>

    <script>
        // ====== FUNCIONALIDADES PROFESIONALES ======
        
        // Verificar acceso del usuario y personalizar experiencia
        function checkUserAccess() {
            const userData = localStorage.getItem('flujoCalorUser');
            if (userData) {
                const user = JSON.parse(userData);
                const welcomeElement = document.getElementById('userWelcome');
                if (welcomeElement && user.nombre) {
                    welcomeElement.innerHTML = `<span>¡Hola <strong>${user.nombre}</strong>! Aquí está todo lo que necesitas 👇</span>`;
                }
                
                // Track access con datos del usuario
                trackEvent('flujo_calor_content_access', {
                    user_name: user.nombre,
                    access_time: Date.now() - user.accessTime,
                    had_webhook_error: user.webhookError || false
                });
            }
        }
        
        // Función mejorada para copiar prompts al clipboard
        function copyToClipboard(promptId) {
            const promptText = document.getElementById(promptId).textContent;
            navigator.clipboard.writeText(promptText).then(function() {
                // Feedback visual mejorado
                const btn = event.target;
                const originalText = btn.textContent;
                btn.textContent = '✅ ¡Copiado!';
                btn.style.background = 'var(--flujo-success)';
                
                setTimeout(() => {
                    btn.textContent = originalText;
                    btn.style.background = 'var(--flujo-primary)';
                }, 2000);
                
                // Track copy action
                trackEvent('flujo_calor_prompt_copied', {
                    prompt_id: promptId,
                    prompt_length: promptText.length
                });
                
            }).catch(function() {
                // Fallback para navegadores que no soportan clipboard
                alert('Prompt copiado. Usa Ctrl+V para pegarlo en N8N.');
            });
        }
        
        // Función mejorada para descargar plantilla N8N
        function downloadN8NTemplate() {
            // Crear contenido JSON más completo y realista
            const n8nTemplate = {
                "name": "FLUJO CALOR - Math AI Agency",
                "version": 1,
                "nodes": [
                    {
                        "parameters": {
                            "httpMethod": "POST",
                            "path": "flujo-calor-webhook",
                            "responseMode": "responseNode",
                            "responseData": "allEntries"
                        },
                        "name": "🎣 Webhook - Captura Lead",
                        "type": "n8n-nodes-base.webhook",
                        "typeVersion": 1,
                        "position": [240, 300],
                        "id": "webhook-node"
                    },
                    {
                        "parameters": {
                            "model": "gpt-4",
                            "messages": {
                                "chatInput": "// PROMPT 1: Cualificación - Pega aquí el Prompt 1 que copiaste arriba"
                            }
                        },
                        "name": "🧠 IA - Cualificación",
                        "type": "n8n-nodes-base.openAi",
                        "typeVersion": 1,
                        "position": [460, 220],
                        "id": "openai-cualificacion"
                    },
                    {
                        "parameters": {
                            "model": "gpt-4",
                            "messages": {
                                "chatInput": "// PROMPT 2: Urgencia - Pega aquí el Prompt 2 que copiaste arriba"
                            }
                        },
                        "name": "⏱️ IA - Urgencia",
                        "type": "n8n-nodes-base.openAi",
                        "typeVersion": 1,
                        "position": [460, 340],
                        "id": "openai-urgencia"
                    },
                    {
                        "parameters": {
                            "model": "gpt-4",
                            "messages": {
                                "chatInput": "// PROMPT 3: ICP - Pega aquí el Prompt 3 que copiaste arriba"
                            }
                        },
                        "name": "🎯 IA - Encaje ICP",
                        "type": "n8n-nodes-base.openAi",
                        "typeVersion": 1,
                        "position": [460, 460],
                        "id": "openai-icp"
                    },
                    {
                        "parameters": {
                            "conditions": {
                                "number": [
                                    {
                                        "value1": "={{$json.puntuacion_lead}}",
                                        "operation": "larger",
                                        "value2": 7
                                    }
                                ]
                            }
                        },
                        "name": "🚦 Decisión - Lead Caliente?",
                        "type": "n8n-nodes-base.if",
                        "typeVersion": 1,
                        "position": [680, 300],
                        "id": "decision-scoring"
                    },
                    {
                        "parameters": {
                            "message": "🔥 LEAD CALIENTE DETECTADO!\n\nNombre: {{$json.nombre}}\nEmpresa: {{$json.empresa}}\nPuntuación: {{$json.puntuacion_lead}}/10\nUrgencia: {{$json.nivel_urgencia}}\n\nResumen: {{$json.resumen_slack}}",
                            "channel": "#leads-calientes"
                        },
                        "name": "📢 Slack - Alert Caliente",
                        "type": "n8n-nodes-base.slack",
                        "typeVersion": 1,
                        "position": [900, 220],
                        "id": "slack-caliente"
                    },
                    {
                        "parameters": {
                            "message": "📋 Nuevo lead registrado\n\nNombre: {{$json.nombre}}\nEmpresa: {{$json.empresa}}\nPuntuación: {{$json.puntuacion_lead}}/10",
                            "channel": "#leads-general"
                        },
                        "name": "📝 Slack - Alert General",
                        "type": "n8n-nodes-base.slack",
                        "typeVersion": 1,
                        "position": [900, 380],
                        "id": "slack-general"
                    }
                ],
                "connections": {
                    "🎣 Webhook - Captura Lead": {
                        "main": [
                            [
                                {"node": "🧠 IA - Cualificación", "type": "main", "index": 0},
                                {"node": "⏱️ IA - Urgencia", "type": "main", "index": 0},
                                {"node": "🎯 IA - Encaje ICP", "type": "main", "index": 0}
                            ]
                        ]
                    },
                    "🧠 IA - Cualificación": {
                        "main": [
                            [{"node": "🚦 Decisión - Lead Caliente?", "type": "main", "index": 0}]
                        ]
                    },
                    "🚦 Decisión - Lead Caliente?": {
                        "main": [
                            [{"node": "📢 Slack - Alert Caliente", "type": "main", "index": 0}],
                            [{"node": "📝 Slack - Alert General", "type": "main", "index": 0}]
                        ]
                    }
                },
                "createdAt": new Date().toISOString(),
                "updatedAt": new Date().toISOString(),
                "settings": {
                    "timezone": "America/Mexico_City"
                },
                "staticData": {},
                "meta": {
                    "templateCredsSetupCompleted": false,
                    "instanceId": "flujo-calor-math-ai"
                }
            };
            
            // Crear descarga con nombre descriptivo
            const dataStr = "data:text/json;charset=utf-8," + encodeURIComponent(JSON.stringify(n8nTemplate, null, 2));
            const downloadAnchorNode = document.createElement('a');
            downloadAnchorNode.setAttribute("href", dataStr);
            downloadAnchorNode.setAttribute("download", "flujo-calor-n8n-template.json");
            document.body.appendChild(downloadAnchorNode);
            downloadAnchorNode.click();
            downloadAnchorNode.remove();
            
            // Track download con detalles
            trackEvent('flujo_calor_template_download', {
                file_name: 'flujo-calor-n8n-template.json',
                template_nodes: n8nTemplate.nodes.length,
                download_timestamp: Date.now()
            });
            
            // Mostrar mensaje de éxito
            showDownloadSuccess();
        }
        
        // Función para mostrar éxito en descarga
        function showDownloadSuccess() {
            const successDiv = document.createElement('div');
            successDiv.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: var(--flujo-success);
                color: white;
                padding: 1rem 1.5rem;
                border-radius: 10px;
                box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
                z-index: 1000;
                animation: slideInRight 0.5s ease, fadeOut 0.5s ease 2.5s forwards;
            `;
            successDiv.innerHTML = '✅ Plantilla N8N descargada correctamente';
            document.body.appendChild(successDiv);
            
            setTimeout(() => {
                document.body.removeChild(successDiv);
            }, 3000);
        }
        
        // Smooth scroll mejorado para navegación
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                    
                    // Track navigation
                    trackEvent('flujo_calor_section_navigation', {
                        section: this.getAttribute('href'),
                        section_name: target.querySelector('.section-title')?.textContent || 'unknown'
                    });
                }
            });
        });
        
        // Checklist interactivo mejorado
        document.querySelectorAll('.checklist-checkbox').forEach(checkbox => {
            checkbox.addEventListener('click', function() {
                const isChecked = this.textContent === '✅';
                if (!isChecked) {
                    this.textContent = '✅';
                    this.style.background = 'var(--flujo-success)';
                    this.style.color = 'white';
                    this.style.borderColor = 'var(--flujo-success)';
                    
                    // Efecto de confetti mini
                    createMiniConfetti(this);
                } else {
                    this.textContent = '☐';
                    this.style.background = 'transparent';
                    this.style.color = 'var(--flujo-primary)';
                    this.style.borderColor = 'var(--flujo-primary)';
                }
                
                // Track checklist progress
                const totalItems = document.querySelectorAll('.checklist-checkbox').length;
                const checkedItems = document.querySelectorAll('.checklist-checkbox:contains("✅")').length;
                const progress = Math.round((checkedItems / totalItems) * 100);
                
                trackEvent('flujo_calor_checklist_progress', {
                    progress_percentage: progress,
                    total_items: totalItems,
                    checked_items: checkedItems
                });
            });
        });
        
        // Mini confetti para checklist
        function createMiniConfetti(element) {
            const colors = ['#FF4500', '#FF6B35', '#F7931E'];
            const rect = element.getBoundingClientRect();
            
            for (let i = 0; i < 5; i++) {
                const particle = document.createElement('div');
                particle.style.cssText = `
                    position: fixed;
                    width: 4px;
                    height: 4px;
                    background: ${colors[Math.floor(Math.random() * colors.length)]};
                    border-radius: 50%;
                    pointer-events: none;
                    z-index: 1000;
                    left: ${rect.left + rect.width/2}px;
                    top: ${rect.top + rect.height/2}px;
                `;
                
                document.body.appendChild(particle);
                
                const angle = (Math.PI * 2 * i) / 5;
                const velocity = 30;
                const vx = Math.cos(angle) * velocity;
                const vy = Math.sin(angle) * velocity;
                
                let x = 0, y = 0, opacity = 1;
                
                const animate = () => {
                    x += vx * 0.1;
                    y += vy * 0.1;
                    opacity -= 0.05;
                    
                    particle.style.transform = `translate(${x}px, ${y}px)`;
                    particle.style.opacity = opacity;
                    
                    if (opacity > 0) {
                        requestAnimationFrame(animate);
                    } else {
                        document.body.removeChild(particle);
                    }
                };
                
                requestAnimationFrame(animate);
            }
        }
        
        // Analytics tracking mejorado
        function trackEvent(eventName, parameters = {}) {
            if (typeof gtag !== 'undefined') {
                gtag('event', eventName, {
                    event_category: 'flujo_calor_content',
                    page_title: 'FLUJO CALOR - Contenido Completo',
                    timestamp: new Date().toISOString(),
                    ...parameters
                });
            }
            console.log('📊 FLUJO CALOR Content Event:', eventName, parameters);
        }
        
        // Scroll tracking avanzado
        let scrollMilestones = {25: false, 50: false, 75: false, 90: false};
        let maxScroll = 0;
        
        window.addEventListener('scroll', () => {
            const scrollPercent = Math.round((window.scrollY / (document.documentElement.scrollHeight - window.innerHeight)) * 100);
            maxScroll = Math.max(maxScroll, scrollPercent);
            
            Object.keys(scrollMilestones).forEach(milestone => {
                if (scrollPercent >= milestone && !scrollMilestones[milestone]) {
                    scrollMilestones[milestone] = true;
                    trackEvent('flujo_calor_content_scroll', {
                        scroll_depth: milestone,
                        max_scroll: maxScroll
                    });
                }
            });
        });
        
        // Tiempo en página y engagement
        let engagementStartTime = Date.now();
        let totalTimeOnPage = 0;
        let isVisible = true;
        
        document.addEventListener('visibilitychange', () => {
            if (document.hidden && isVisible) {
                totalTimeOnPage += Date.now() - engagementStartTime;
                isVisible = false;
                
                trackEvent('flujo_calor_content_visibility_hidden', {
                    session_time: totalTimeOnPage,
                    max_scroll_reached: maxScroll
                });
            } else if (!document.hidden && !isVisible) {
                engagementStartTime = Date.now();
                isVisible = true;
            }
        });
        
        // Tracking para botones de Calendly
        function initCalendarTracking() {
            document.querySelectorAll('.cal-popup-trigger').forEach(function(button) {
                button.addEventListener('click', function() {
                    const buttonText = this.textContent.trim();
                    trackEvent('flujo_calor_calendar_click', {
                        button_text: buttonText,
                        page_section: 'content_page_cta'
                    });
                });
            });
        }

        // Inicialización mejorada
        document.addEventListener('DOMContentLoaded', function() {
            checkUserAccess();
            initCalendarTracking();
            
            // Track page view con contexto
            trackEvent('flujo_calor_content_page_view', {
                referrer: document.referrer,
                user_agent: navigator.userAgent,
                screen_resolution: `${screen.width}x${screen.height}`,
                viewport_size: `${window.innerWidth}x${window.innerHeight}`,
                has_user_data: !!localStorage.getItem('flujoCalorUser')
            });
            
            // Añadir animaciones CSS necesarias
            const style = document.createElement('style');
            style.textContent = `
                @keyframes slideInRight {
                    from { transform: translateX(100%); opacity: 0; }
                    to { transform: translateX(0); opacity: 1; }
                }
                
                @keyframes fadeOut {
                    to { opacity: 0; transform: translateX(100%); }
                }
            `;
            document.head.appendChild(style);
            
            console.log('✅ FLUJO CALOR Content Page Ready - Professional Version');
        });
    </script>
</body>
</html> 